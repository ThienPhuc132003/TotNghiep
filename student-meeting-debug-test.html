<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Student Meeting View Debug Test</title>
    <style>
      body {
        font-family: "Segoe UI", Arial, sans-serif;
        margin: 20px;
        background: #f5f5f5;
      }
      .container {
        max-width: 800px;
        margin: 0 auto;
        background: white;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }
      .test-case {
        margin: 20px 0;
        padding: 15px;
        border-left: 4px solid #007bff;
        background: #f8f9fa;
      }
      .expected {
        color: #28a745;
        font-weight: bold;
      }
      .issue {
        color: #dc3545;
        font-weight: bold;
      }
      .code {
        background: #2d3748;
        color: #68d391;
        padding: 10px;
        border-radius: 4px;
        font-family: "Courier New", monospace;
        white-space: pre-wrap;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>ğŸ” STUDENT MEETING VIEW DEBUG TEST</h1>

      <div class="test-case">
        <h2>ğŸ¯ Test Scenario</h2>
        <p><strong>Action:</strong> Student click "Xem danh sÃ¡ch phÃ²ng há»c"</p>
        <p><strong>API:</strong> POST meeting/get-meeting { classroomId }</p>
        <p><strong>Expected Data:</strong> 5 meetings, all status "ENDED"</p>
        <p>
          <strong>Expected UI:</strong> Tab "PhÃ²ng há»c Ä‘Ã£ káº¿t thÃºc" active vá»›i 5
          meetings
        </p>
      </div>

      <div class="test-case">
        <h2>ğŸ“Š API Response Structure</h2>
        <div class="code">
          { "result": { "total": 5, "items": [ { "status": "ENDED", "meetingId":
          "52a4f229-...", "topic": "Lá»›p há»c: ..." }, { "status": "ENDED",
          "meetingId": "41b44620-...", "topic": "Lá»›p há»c: undefined" }, {
          "status": "ENDED", "meetingId": "97262857-...", "topic": "Lá»›p há»c:
          ..." }, { "status": "ENDED", "meetingId": "22523e7e-...", "topic":
          "test" }, { "status": "ENDED", "meetingId": "d17c10f3-...", "topic":
          "Lá»›p há»c: ..." } ] } }
        </div>
      </div>

      <div class="test-case">
        <h2>ğŸ”§ StudentClassroomPage Flow Debug</h2>

        <h3>Step 1: API Call</h3>
        <div class="expected">âœ… EXPECTED:</div>
        <div class="code">
          ğŸ” STUDENT DEBUG - Fetching meetings using meeting/get-meeting API
          (primary) ğŸ” STUDENT DEBUG - meeting/get-meeting response: {success:
          true, result: {...}} âœ… STUDENT DEBUG - Found meetings in
          response.result.items: 5
        </div>

        <h3>Step 2: Data Processing</h3>
        <div class="expected">âœ… EXPECTED:</div>
        <div class="code">
          ğŸ” STUDENT DEBUG - Meetings status breakdown: { allStatuses: ["ENDED",
          "ENDED", "ENDED", "ENDED", "ENDED"], inSessionCount: 0, endedCount: 5
          } ğŸ” STUDENT DEBUG - Setting meetings to state: 5
        </div>

        <h3>Step 3: State Updates</h3>
        <div class="expected">âœ… EXPECTED:</div>
        <div class="code">
          setMeetingList(allMeetingsData) // 5 meetings setTotalMeetings(5)
          setShowMeetingView(true) activeMeetingTab = "ENDED" // default tab
        </div>

        <h3>Step 4: Rendering & Filtering</h3>
        <div class="expected">âœ… EXPECTED:</div>
        <div class="code">
          ğŸ“Š Student meeting filtering: 5 total â†’ 5 filtered (tab: ENDED) // All
          5 meetings pass ENDED filter filteredMeetings = [5 meetings with
          status "ENDED"]
        </div>
      </div>

      <div class="test-case">
        <h2>ğŸ› Troubleshooting Checklist</h2>

        <h3>Issue: "KhÃ´ng hiá»ƒn thá»‹ gÃ¬ cáº£"</h3>

        <p><strong>Check 1: API Response</strong></p>
        <ul>
          <li>Console log: "Found meetings in response.result.items: 5" âœ…</li>
          <li>Console log: "Setting meetings to state: 5" âœ…</li>
          <li>
            <span class="issue">If not found</span> â†’ API khÃ´ng tráº£ vá» data Ä‘Ãºng
            structure
          </li>
        </ul>

        <p><strong>Check 2: State Updates</strong></p>
        <ul>
          <li>meetingList.length === 5 âœ…</li>
          <li>showMeetingView === true âœ…</li>
          <li>activeMeetingTab === "ENDED" âœ…</li>
          <li><span class="issue">If not</span> â†’ State update bá»‹ lá»—i</li>
        </ul>

        <p><strong>Check 3: Filtering Logic</strong></p>
        <ul>
          <li>Console log: "5 total â†’ 5 filtered (tab: ENDED)" âœ…</li>
          <li>filteredMeetings.length === 5 âœ…</li>
          <li><span class="issue">If 0 filtered</span> â†’ Filter logic sai</li>
        </ul>

        <p><strong>Check 4: UI Rendering</strong></p>
        <ul>
          <li>Tab "PhÃ²ng há»c Ä‘Ã£ káº¿t thÃºc" cÃ³ class "active" âœ…</li>
          <li>Tab count hiá»ƒn thá»‹ "(5)" âœ…</li>
          <li>Meeting list hiá»ƒn thá»‹ 5 items âœ…</li>
          <li>
            <span class="issue">If not</span> â†’ Conditional rendering bá»‹ lá»—i
          </li>
        </ul>
      </div>

      <div class="test-case">
        <h2>ğŸ” Debug Commands</h2>
        <p>Má»Ÿ Console Developer Tools vÃ  check:</p>

        <div class="code">
          // 1. Check API response console.log("API Response Success:",
          response.success) console.log("Data location:",
          response.result?.items?.length || response.data?.items?.length) // 2.
          Check state console.log("Meeting List:", meetingList.length)
          console.log("Show Meeting View:", showMeetingView) console.log("Active
          Tab:", activeMeetingTab) // 3. Check filtering console.log("Filtered
          Meetings:", filteredMeetings.length) console.log("All meetings
          status:", meetingList.map(m => m.status)) // 4. Manual filtering test
          const testFilter = meetingList.filter(m => m.status === "ENDED")
          console.log("Manual ENDED filter:", testFilter.length)
        </div>
      </div>

      <div class="test-case">
        <h2>âš¡ Quick Fix Actions</h2>

        <p><strong>Action 1:</strong> Clear cache vÃ  reload page</p>
        <p>
          <strong>Action 2:</strong> Check Network tab Ä‘á»ƒ verify API Ä‘Æ°á»£c gá»i
        </p>
        <p><strong>Action 3:</strong> Verify token authentication</p>
        <p>
          <strong>Action 4:</strong> Compare vá»›i TutorClassroomPage behavior
        </p>
        <p><strong>Action 5:</strong> Test vá»›i different classroomId</p>
      </div>

      <div class="test-case">
        <h2>ğŸ¯ Expected Final Result</h2>
        <div class="expected">UI should show:</div>
        <div class="code">
          ğŸ“‹ Danh sÃ¡ch phÃ²ng há»c - [Classroom Name] â”œâ”€â”€ ğŸ”µ PhÃ²ng há»c Ä‘ang hoáº¡t
          Ä‘á»™ng (0) â”œâ”€â”€ ğŸ”´ PhÃ²ng há»c Ä‘Ã£ káº¿t thÃºc (5) â† ACTIVE TAB â””â”€â”€ [5 meeting
          items displayed] â”œâ”€â”€ Meeting 1: "Lá»›p há»c: Lá»›p há»c vá»›i gia sÆ° Nguyá»…n
          VÄƒn An" â”œâ”€â”€ Meeting 2: "Lá»›p há»c: undefined" â”œâ”€â”€ Meeting 3: "Lá»›p há»c:
          Lá»›p há»c vá»›i gia sÆ° Nguyá»…n VÄƒn An" â”œâ”€â”€ Meeting 4: "test" â””â”€â”€ Meeting 5:
          "Lá»›p há»c: Lá»›p há»c vá»›i gia sÆ° Nguyá»…n VÄƒn An"
        </div>
      </div>
    </div>

    <script>
      console.log("ğŸ”§ Student Meeting Debug Test Page Loaded");
      console.log("ğŸ“ Follow the debug steps above to identify the issue");
      console.log("ğŸ¯ Expected: 5 meetings in ENDED tab should be visible");
    </script>
  </body>
</html>
