<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>API Logging Test</title>
  </head>
  <body>
    <h1>API Logging Test - Simple & Clean</h1>

    <div>
      <h2>Console Commands:</h2>
      <button onclick="enableAPILogging()">Enable Logging</button>
      <button onclick="disableAPILogging()">Disable Logging</button>
      <button onclick="toggleAPILogging()">Toggle Logging</button>
    </div>

    <div>
      <h2>Example Logs:</h2>
      <button onclick="testSimpleLogging()">Test Simple Logging</button>
      <button onclick="testWithQuery()">Test With Query Params</button>
      <button onclick="testWithData()">Test With Request Data</button>
      <button onclick="testError()">Test Error Logging</button>
    </div>

    <script>
      // Mock API Logger for demonstration
      class APILogger {
        constructor() {
          this.isEnabled =
            localStorage.getItem("API_LOGGING_ENABLED") !== "false";
        }

        enable() {
          this.isEnabled = true;
          localStorage.setItem("API_LOGGING_ENABLED", "true");
          console.log("🔊 API Logging ENABLED");
        }

        disable() {
          this.isEnabled = false;
          localStorage.setItem("API_LOGGING_ENABLED", "false");
          console.log("🔇 API Logging DISABLED");
        }

        toggle() {
          if (this.isEnabled) {
            this.disable();
          } else {
            this.enable();
          }
        }

        logRequest(method, url, data = null, query = null) {
          if (!this.isEnabled) return;

          console.log(`🚀 [${method}] ${url}`);
          if (query && Object.keys(query).length > 0) {
            console.log("📋 Query:", query);
          }
          if (data && Object.keys(data).length > 0) {
            console.log("📤 Data:", data);
          }
        }

        logResponse(data) {
          if (!this.isEnabled) return;
          console.log("✅ Response:", data);
        }

        logError(error, url = "") {
          if (!this.isEnabled) return;
          console.log(`❌ Error${url ? ` [${url}]` : ""}:`, error);
        }
      }

      // Create instance
      const apiLogger = new APILogger();

      // Expose to window
      window.enableAPILogging = () => apiLogger.enable();
      window.disableAPILogging = () => apiLogger.disable();
      window.toggleAPILogging = () => apiLogger.toggle();

      // Test functions
      window.testSimpleLogging = () => {
        console.group("=== Test Simple API Call ===");
        apiLogger.logRequest("GET", "https://api.example.com/users");
        apiLogger.logResponse({ success: true, data: { users: [] } });
        console.groupEnd();
      };

      window.testWithQuery = () => {
        console.group("=== Test API Call With Query ===");
        apiLogger.logRequest(
          "GET",
          "https://api.example.com/classroom/search-for-tutor",
          null,
          { page: 1, rpp: 10 }
        );
        apiLogger.logResponse({ success: true, data: { items: [], total: 0 } });
        console.groupEnd();
      };

      window.testWithData = () => {
        console.group("=== Test API Call With Data ===");
        apiLogger.logRequest("POST", "https://api.example.com/meeting/create", {
          topic: "Test Meeting",
          password: "abc123",
          classroomId: "room-001",
        });
        apiLogger.logResponse({
          success: true,
          data: { id: "123", join_url: "https://zoom.us/j/123" },
        });
        console.groupEnd();
      };

      window.testError = () => {
        console.group("=== Test API Error ===");
        apiLogger.logRequest("POST", "https://api.example.com/meeting/create", {
          topic: "Test Meeting",
        });
        apiLogger.logError(
          { message: "Unauthorized access", success: false },
          "meeting/create"
        );
        console.groupEnd();
      };

      // Auto-enable logging
      apiLogger.enable();

      console.log(`
🔧 API Logging Demo Loaded!
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

📋 Available Commands:
  🔊 enableAPILogging()   - Bật logging  
  🔇 disableAPILogging()  - Tắt logging
  🔄 toggleAPILogging()   - Chuyển đổi

🧪 Test Functions:
  testSimpleLogging()  - Test basic API call
  testWithQuery()      - Test với query params  
  testWithData()       - Test với request data
  testError()          - Test error logging

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
💡 Click buttons or run commands in console!
        `);
    </script>
  </body>
</html>
