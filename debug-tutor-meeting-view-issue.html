<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>üêõ Debug Tutor Meeting View Issue</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        max-width: 1000px;
        margin: 0 auto;
        padding: 20px;
        background-color: #f5f5f5;
      }
      .debug-section {
        background-color: white;
        padding: 20px;
        border-radius: 8px;
        margin-bottom: 20px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }
      .code-block {
        background-color: #f8f9fa;
        border: 1px solid #e9ecef;
        border-radius: 4px;
        padding: 15px;
        font-family: monospace;
        white-space: pre-wrap;
        overflow-x: auto;
      }
      .highlight {
        background-color: #fff3cd;
        padding: 10px;
        border-left: 4px solid #ffc107;
        margin: 10px 0;
      }
      .success {
        background-color: #d4edda;
        color: #155724;
        border-left: 4px solid #28a745;
      }
      .error {
        background-color: #f8d7da;
        color: #721c24;
        border-left: 4px solid #dc3545;
      }
      h2 {
        color: #333;
        border-bottom: 2px solid #007bff;
        padding-bottom: 10px;
      }
      .checklist {
        list-style-type: none;
        padding: 0;
      }
      .checklist li {
        padding: 8px 0;
        border-bottom: 1px solid #eee;
      }
      .checklist li:before {
        content: "‚òê ";
        margin-right: 10px;
      }
      .checklist li.done:before {
        content: "‚úÖ ";
      }
    </style>
  </head>
  <body>
    <h1>üêõ Debug Guide: Tutor Meeting View Issue</h1>

    <div class="debug-section">
      <h2>üéØ Problem Description</h2>
      <p>
        <strong>Issue:</strong> Khi Tutor nh·∫•n "Xem ph√≤ng h·ªçc" trong qu·∫£n l√Ω l·ªõp
        h·ªçc, kh√¥ng hi·ªÉn th·ªã danh s√°ch meetings m·∫∑c d√π API tr·∫£ v·ªÅ data ƒë√∫ng.
      </p>
      <p>
        <strong>Expected:</strong> Hi·ªÉn th·ªã danh s√°ch meetings gi·ªëng nh∆∞
        Student.
      </p>
      <p>
        <strong>Current:</strong> View chuy·ªÉn nh∆∞ng kh√¥ng c√≥ meetings hi·ªÉn th·ªã.
      </p>
    </div>

    <div class="debug-section">
      <h2>üîç Debug Checklist</h2>
      <p>Th·ª±c hi·ªán c√°c b∆∞·ªõc sau ƒë·ªÉ debug:</p>

      <ul class="checklist">
        <li>1. M·ªü Developer Tools (F12) ‚Üí Console tab</li>
        <li>2. Login as Tutor</li>
        <li>3. Navigate to classroom management</li>
        <li>4. Click "Xem ph√≤ng h·ªçc" for any classroom</li>
        <li>5. Check console for debug logs</li>
      </ul>
    </div>

    <div class="debug-section">
      <h2>üìã Expected Console Logs</h2>
      <p>You should see these logs in sequence:</p>

      <div class="code-block">
        üîç TUTOR DEBUG - Fetching meetings for classroom: {classroomId,
        classroomName, endpoint, timestamp} üîç TUTOR DEBUG - Token status:
        {hasToken: true, tokenLength: XXX, tokenPreview: "..."} üîç TUTOR DEBUG -
        meeting/get-meeting response: {success: true, result: {...}} üîç TUTOR
        DEBUG - Full response structure: {...} ‚úÖ TUTOR DEBUG - Found meetings
        in response.result.items: 5 üîç TUTOR DEBUG - Meeting data structure:
        {meetingId: "...", topic: "...", ...} üîç TUTOR DEBUG - Setting meetings
        to state: 5 üîç TUTOR DEBUG - Filtered result: {totalItems: 5,
        filteredItems: X, activeMeetingTab: "...", resultTotal: X} üîç TUTOR
        DEBUG - About to show meeting view üîç TUTOR DEBUG - Meeting view should
        now be visible
      </div>
    </div>

    <div class="debug-section">
      <h2>‚ö†Ô∏è Possible Issues & Solutions</h2>

      <div class="highlight error">
        <strong>Issue 1: No Token</strong><br />
        If log shows "hasToken: false" ‚Üí Login issue
        <div class="code-block">Solution: Re-login as Tutor</div>
      </div>

      <div class="highlight error">
        <strong>Issue 2: API Fails</strong><br />
        If response shows success: false ‚Üí API issue
        <div class="code-block">
          Solution: Check network tab for HTTP errors
        </div>
      </div>

      <div class="highlight error">
        <strong>Issue 3: No Data in Response</strong><br />
        If response.result.items is empty ‚Üí Backend filtering issue
        <div class="code-block">
          Solution: Check if classroomId belongs to this tutor
        </div>
      </div>

      <div class="highlight error">
        <strong>Issue 4: Client-side Filtering Issue</strong><br />
        If data exists but filteredItems is 0 ‚Üí Tab filtering issue
        <div class="code-block">
          Solution: Check activeMeetingTab value and getFilteredItems function
        </div>
      </div>

      <div class="highlight error">
        <strong>Issue 5: State Not Updating</strong><br />
        If logs show data but UI doesn't update ‚Üí React state issue
        <div class="code-block">
          Solution: Check if setShowMeetingView(true) is called
        </div>
      </div>

      <div class="highlight error">
        <strong>Issue 6: Component Not Re-rendering</strong><br />
        If state updates but UI doesn't change ‚Üí Component rendering issue
        <div class="code-block">
          Solution: Check meetingList state and conditional rendering
        </div>
      </div>
    </div>

    <div class="debug-section">
      <h2>üîß Quick Fixes to Try</h2>

      <div class="highlight">
        <strong>Fix 1: Force Re-render</strong><br />
        Add key prop to meeting view component to force re-mount
      </div>

      <div class="highlight">
        <strong>Fix 2: Check activeMeetingTab</strong><br />
        Ensure activeMeetingTab is set to show all meetings (e.g., "ALL" or
        "IN_SESSION")
      </div>

      <div class="highlight">
        <strong>Fix 3: Bypass Filtering</strong><br />
        Temporarily set meetingList directly without filtering to test
      </div>

      <div class="highlight">
        <strong>Fix 4: Check Conditional Rendering</strong><br />
        Ensure meeting list component renders when showMeetingView is true
      </div>
    </div>

    <div class="debug-section">
      <h2>üß™ Testing Commands</h2>
      <p>Run these in browser console during debug:</p>

      <div class="code-block">
        // Check current state console.log("showMeetingView:", /* current state
        value */); console.log("meetingList:", /* current state value */);
        console.log("allMeetings:", /* current state value */);
        console.log("activeMeetingTab:", /* current state value */); // Check
        DOM elements console.log("Meeting view container:",
        document.querySelector('[class*="meeting"]')); console.log("Meeting
        items:", document.querySelectorAll('[class*="meeting-item"]'));
      </div>
    </div>

    <div class="debug-section">
      <h2>üìä Comparison: Student vs Tutor</h2>
      <p>Compare behaviors between Student and Tutor:</p>

      <table style="width: 100%; border-collapse: collapse">
        <tr style="background-color: #f8f9fa">
          <th style="border: 1px solid #dee2e6; padding: 8px">Aspect</th>
          <th style="border: 1px solid #dee2e6; padding: 8px">Student</th>
          <th style="border: 1px solid #dee2e6; padding: 8px">Tutor</th>
        </tr>
        <tr>
          <td style="border: 1px solid #dee2e6; padding: 8px">API Call</td>
          <td style="border: 1px solid #dee2e6; padding: 8px">
            meeting/get-meeting (POST)
          </td>
          <td style="border: 1px solid #dee2e6; padding: 8px">
            meeting/get-meeting (POST)
          </td>
        </tr>
        <tr>
          <td style="border: 1px solid #dee2e6; padding: 8px">ClassroomId</td>
          <td style="border: 1px solid #dee2e6; padding: 8px">Same ID</td>
          <td style="border: 1px solid #dee2e6; padding: 8px">Same ID</td>
        </tr>
        <tr>
          <td style="border: 1px solid #dee2e6; padding: 8px">
            Token Required
          </td>
          <td style="border: 1px solid #dee2e6; padding: 8px">Yes</td>
          <td style="border: 1px solid #dee2e6; padding: 8px">Yes</td>
        </tr>
        <tr>
          <td style="border: 1px solid #dee2e6; padding: 8px">
            Response Structure
          </td>
          <td style="border: 1px solid #dee2e6; padding: 8px">
            response.result.items
          </td>
          <td style="border: 1px solid #dee2e6; padding: 8px">
            response.result.items
          </td>
        </tr>
        <tr style="background-color: #fff3cd">
          <td style="border: 1px solid #dee2e6; padding: 8px">
            <strong>UI Result</strong>
          </td>
          <td style="border: 1px solid #dee2e6; padding: 8px">
            <strong>‚úÖ Shows meetings</strong>
          </td>
          <td style="border: 1px solid #dee2e6; padding: 8px">
            <strong>‚ùå No meetings</strong>
          </td>
        </tr>
      </table>
    </div>

    <div class="debug-section">
      <h2>üì± Next Steps</h2>
      <div class="highlight success">
        <strong>After running debug:</strong><br />
        1. Copy all console logs and share<br />
        2. Note which step fails<br />
        3. Check network tab for API response<br />
        4. Compare with Student behavior<br />
        5. Try suggested fixes based on findings
      </div>
    </div>

    <script>
      // Auto-update checklist when clicked
      document.querySelectorAll(".checklist li").forEach((item) => {
        item.addEventListener("click", function () {
          this.classList.toggle("done");
        });
      });
    </script>
  </body>
</html>
