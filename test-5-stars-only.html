<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Test 5 Stars Only - Meeting Rating</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
    <style>
      body {
        font-family: "Segoe UI", Arial, sans-serif;
        background-color: #f8f9fa;
        margin: 0;
        padding: 20px;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
      }

      .test-container {
        background: white;
        border-radius: 12px;
        padding: 40px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        text-align: center;
      }

      /* Fixed 5-Star Rating System - Force 5 stars only */
      .scp-star-rating {
        display: flex !important;
        justify-content: center !important;
        gap: 4px !important;
        margin-bottom: 12px !important;
        width: 200px !important;
        margin-left: auto !important;
        margin-right: auto !important;
        flex-wrap: nowrap !important;
        overflow: hidden !important;
        border: 2px solid #28a745; /* Debug border to see container */
      }

      .scp-star-container {
        position: relative !important;
        display: inline-flex !important;
        cursor: pointer !important;
        width: 32px !important;
        height: 32px !important;
        flex-shrink: 0 !important;
        margin: 0 !important;
        overflow: hidden !important;
        border: 1px solid blue; /* Debug border */
      }

      /* Ensure only 5 stars maximum */
      .scp-star-container:nth-child(n + 6) {
        display: none !important;
      }

      .scp-star-half {
        position: absolute !important;
        top: 0 !important;
        width: 50% !important;
        height: 100% !important;
        overflow: hidden !important;
        color: #dee2e6 !important;
        font-size: 1.5rem !important;
        transition: color 0.2s ease !important;
        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
        z-index: 1 !important;
        line-height: 1 !important;
      }

      .scp-star-half.active {
        color: #ffc107 !important;
      }

      .scp-star-left {
        left: 0 !important;
        clip-path: inset(0 50% 0 0) !important;
      }

      .scp-star-right {
        right: 0 !important;
        clip-path: inset(0 0 0 50%) !important;
      }

      .scp-star-half:hover {
        color: #ffc107 !important;
      }

      .scp-star-half i {
        pointer-events: none !important;
      }

      /* Additional safety rule to ensure max 5 stars */
      .scp-star-rating > .scp-star-container:nth-child(6),
      .scp-star-rating > .scp-star-container:nth-child(7),
      .scp-star-rating > .scp-star-container:nth-child(8),
      .scp-star-rating > .scp-star-container:nth-child(9),
      .scp-star-rating > .scp-star-container:nth-child(10) {
        display: none !important;
      }

      .rating-info {
        margin-top: 20px;
        padding: 10px;
        background: #f8f9fa;
        border-radius: 8px;
      }
    </style>
  </head>
  <body>
    <div class="test-container">
      <h2>üåü Test Ch·ªâ C√≥ 5 Sao</h2>
      <p>Ki·ªÉm tra xem c√≥ ƒë√∫ng 5 sao kh√¥ng (c√≥ border debug)</p>

      <div class="scp-star-rating" id="starRating">
        <!-- Stars will be generated by JavaScript -->
      </div>

      <div class="rating-info">
        <p>
          <strong>Rating hi·ªán t·∫°i:</strong>
          <span id="currentRating">0</span> sao
        </p>
        <p>
          <strong>Hover rating:</strong> <span id="hoverRating">0</span> sao
        </p>
        <p>
          <strong>T·ªïng s·ªë star containers:</strong>
          <span id="starCount">0</span>
        </p>
      </div>

      <button
        onclick="generateStars()"
        style="
          margin-top: 20px;
          padding: 10px 20px;
          background: #28a745;
          color: white;
          border: none;
          border-radius: 8px;
          cursor: pointer;
        "
      >
        Generate l·∫°i 5 sao
      </button>
    </div>

    <script>
      let currentRating = 0;
      let hoverRating = 0;

      function generateStars() {
        const starContainer = document.getElementById("starRating");
        starContainer.innerHTML = "";

        console.log("Generating exactly 5 stars...");

        // T·∫°o ƒë√∫ng 5 sao, kh√¥ng nhi·ªÅu h∆°n
        for (let i = 1; i <= 5; i++) {
          const starDiv = document.createElement("div");
          starDiv.className = "scp-star-container";
          starDiv.setAttribute("data-star", i);

          // Half star (left side)
          const leftHalf = document.createElement("div");
          leftHalf.className = "scp-star-half scp-star-left";
          leftHalf.innerHTML = '<i class="fas fa-star"></i>';
          leftHalf.addEventListener("mouseenter", () =>
            setHoverRating(i - 0.5)
          );
          leftHalf.addEventListener("mouseleave", () => setHoverRating(0));
          leftHalf.addEventListener("click", () => setRating(i - 0.5));

          // Full star (right side)
          const rightHalf = document.createElement("div");
          rightHalf.className = "scp-star-half scp-star-right";
          rightHalf.innerHTML = '<i class="fas fa-star"></i>';
          rightHalf.addEventListener("mouseenter", () => setHoverRating(i));
          rightHalf.addEventListener("mouseleave", () => setHoverRating(0));
          rightHalf.addEventListener("click", () => setRating(i));

          starDiv.appendChild(leftHalf);
          starDiv.appendChild(rightHalf);
          starContainer.appendChild(starDiv);

          console.log(`Created star ${i}`);
        }

        updateStarCount();
        updateStarDisplay();
      }

      function setHoverRating(rating) {
        hoverRating = rating;
        document.getElementById("hoverRating").textContent = rating;
        updateStarDisplay();
      }

      function setRating(rating) {
        currentRating = rating;
        document.getElementById("currentRating").textContent = rating;
        updateStarDisplay();
      }

      function updateStarDisplay() {
        const activeRating = hoverRating || currentRating;
        const stars = document.querySelectorAll(".scp-star-half");

        stars.forEach((star, index) => {
          const starValue = Math.floor(index / 2) + 1;
          const isLeftHalf = index % 2 === 0;
          const starThreshold = isLeftHalf ? starValue - 0.5 : starValue;

          if (activeRating >= starThreshold) {
            star.classList.add("active");
          } else {
            star.classList.remove("active");
          }
        });
      }

      function updateStarCount() {
        const starContainers = document.querySelectorAll(".scp-star-container");
        document.getElementById("starCount").textContent =
          starContainers.length;

        if (starContainers.length !== 5) {
          alert(`C·∫¢NH B√ÅO: C√≥ ${starContainers.length} sao thay v√¨ 5!`);
        }
      }

      // Initialize
      document.addEventListener("DOMContentLoaded", generateStars);
    </script>
  </body>
</html>
