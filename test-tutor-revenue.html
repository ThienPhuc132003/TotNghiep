<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Test Trang Thá»‘ng KÃª Doanh Thu Gia SÆ°</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
        background-color: #f5f5f5;
      }
      .test-section {
        background: white;
        margin: 20px 0;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }
      .test-title {
        color: #2c3e50;
        border-bottom: 2px solid #3498db;
        padding-bottom: 10px;
        margin-bottom: 15px;
      }
      .test-result {
        margin: 10px 0;
        padding: 10px;
        border-radius: 4px;
      }
      .success {
        background-color: #d4edda;
        color: #155724;
        border: 1px solid #c3e6cb;
      }
      .error {
        background-color: #f8d7da;
        color: #721c24;
        border: 1px solid #f5c6cb;
      }
      .info {
        background-color: #d1ecf1;
        color: #0c5460;
        border: 1px solid #bee5eb;
      }
      .test-button {
        background-color: #007bff;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 4px;
        cursor: pointer;
        margin: 5px;
      }
      .test-button:hover {
        background-color: #0056b3;
      }
      .url-link {
        color: #007bff;
        text-decoration: none;
        font-weight: bold;
      }
      .url-link:hover {
        text-decoration: underline;
      }
    </style>
  </head>
  <body>
    <h1>ğŸ§ª Test Trang Thá»‘ng KÃª Doanh Thu Gia SÆ°</h1>

    <div class="test-section">
      <h2 class="test-title">ğŸ“‹ ThÃ´ng Tin Trang</h2>
      <div class="test-result info">
        <strong>URL:</strong>
        <a
          href="http://localhost:5173/admin/doanh-thu-gia-su"
          class="url-link"
          target="_blank"
        >
          http://localhost:5173/admin/doanh-thu-gia-su
        </a>
      </div>
      <div class="test-result info">
        <strong>Component:</strong> TutorRevenueStatistics.jsx
      </div>
      <div class="test-result info">
        <strong>API Endpoint:</strong>
        manage-payment/search-with-time-for-tutor-revenue
      </div>
    </div>

    <div class="test-section">
      <h2 class="test-title">âœ… CÃ¡c TÃ­nh NÄƒng ÄÃ£ Implement</h2>
      <div class="test-result success">
        âœ“ Bá»™ lá»c theo loáº¡i thá»i gian (NgÃ y/Tuáº§n/ThÃ¡ng/NÄƒm)
      </div>
      <div class="test-result success">
        âœ“ Bá»™ lá»c theo giÃ¡ trá»‹ thá»i gian (sá»‘ lÆ°á»£ng)
      </div>
      <div class="test-result success">
        âœ“ Báº£ng hiá»ƒn thá»‹ vá»›i cÃ¡c cá»™t: STT, MÃ£ há»c viÃªn, TÃªn há»c viÃªn, MÃ£ gia sÆ°,
        TÃªn gia sÆ°, Tiá»n há»c viÃªn Ä‘Ã³ng, Tiá»n tráº£ gia sÆ°, Doanh thu
      </div>
      <div class="test-result success">
        âœ“ Hiá»ƒn thá»‹ tá»•ng doanh thu (totalRevenue)
      </div>
      <div class="test-result success">âœ“ Pagination (phÃ¢n trang)</div>
      <div class="test-result success">âœ“ Sorting (sáº¯p xáº¿p)</div>
      <div class="test-result success">âœ“ Loading states</div>
      <div class="test-result success">âœ“ Error handling</div>
      <div class="test-result success">âœ“ Currency formatting (VNÄ)</div>
      <div class="test-result success">âœ“ Responsive design</div>
    </div>

    <div class="test-section">
      <h2 class="test-title">ğŸ”— Route Setup</h2>
      <div class="test-result success">âœ“ Route Ä‘Ã£ Ä‘Æ°á»£c thÃªm vÃ o App.jsx</div>
      <div class="test-result success">âœ“ Component Ä‘Æ°á»£c lazy load</div>
      <div class="test-result success">
        âœ“ Protected route (AdminPrivateRoutes)
      </div>
    </div>
    <div class="test-section">
      <h2 class="test-title">ğŸ” Authentication Testing</h2>
      <button class="test-button" onclick="checkAuthStatus()">
        Check Auth Status
      </button>
      <button class="test-button" onclick="testAPIEndpoint()">
        Test API Endpoint
      </button>
      <button class="test-button" onclick="openLoginPage()">
        Open Login Page
      </button>
      <button class="test-button" onclick="openAdminPage()">
        Open Admin Page
      </button>
      <div id="auth-results"></div>
    </div>

    <div class="test-section">
      <h2 class="test-title">ğŸ“‹ Test Cases</h2>
      <button class="test-button" onclick="testDirectAccess()">
        Test 1: Truy cáº­p trá»±c tiáº¿p
      </button>
      <button class="test-button" onclick="testFilters()">
        Test 2: Test bá»™ lá»c
      </button>
      <button class="test-button" onclick="testPagination()">
        Test 3: Test phÃ¢n trang
      </button>
      <button class="test-button" onclick="testSorting()">
        Test 4: Test sáº¯p xáº¿p
      </button>

      <div id="test-results"></div>
    </div>

    <div class="test-section">
      <h2 class="test-title">âš ï¸ LÆ°u Ã</h2>
      <div class="test-result info">
        <strong>Menu Admin:</strong> Menu item chÆ°a xuáº¥t hiá»‡n trong sidebar vÃ¬
        menu Ä‘Æ°á»£c load Ä‘á»™ng tá»« API <code>menu/me</code>. Backend cáº§n cáº­p nháº­t Ä‘á»ƒ
        thÃªm menu item cho trang nÃ y.
      </div>
      <div class="test-result info">
        <strong>Quyá»n truy cáº­p:</strong> Cáº§n Ä‘Äƒng nháº­p vá»›i tÃ i khoáº£n admin Ä‘á»ƒ
        truy cáº­p trang nÃ y.
      </div>
      <div class="test-result info">
        <strong>API Data:</strong> Trang sáº½ hiá»ƒn thá»‹ dá»¯ liá»‡u thá»±c tá»« API
        endpoint <code>manage-payment/search-with-time-for-tutor-revenue</code>.
      </div>
    </div>
    <script>
      // Authentication testing functions
      function checkAuthStatus() {
        const resultsDiv = document.getElementById("auth-results");
        const cookies = document.cookie;
        const userData = localStorage.getItem("user");
        const hasAuthCookie =
          cookies.includes("token") || cookies.includes("auth");

        resultsDiv.innerHTML = `
          <div class="test-result ${hasAuthCookie ? "success" : "error"}">
            <strong>ğŸª Cookies:</strong> ${cookies || "No cookies found"}<br>
            <strong>ğŸ‘¤ User Data:</strong> ${
              userData || "No user data in localStorage"
            }<br>
            <strong>âœ… Has Auth:</strong> ${hasAuthCookie ? "Yes" : "No"}
          </div>
        `;
      }

      async function testAPIEndpoint() {
        const resultsDiv = document.getElementById("auth-results");
        resultsDiv.innerHTML =
          '<div class="test-result info">ğŸŒ Testing API endpoint...</div>';

        try {
          const response = await fetch(
            "/api/manage-payment/search-with-time-for-tutor-revenue?rpp=10&page=1&periodType=MONTH&periodValue=2024-12",
            {
              method: "GET",
              headers: {
                "Content-Type": "application/json",
              },
              credentials: "include",
            }
          );

          const responseText = await response.text();
          let responseData;
          try {
            responseData = JSON.parse(responseText);
          } catch {
            responseData = responseText;
          }

          resultsDiv.innerHTML = `
            <div class="test-result ${response.ok ? "success" : "error"}">
              <strong>ğŸ“Š Status:</strong> ${response.status}<br>
              <strong>ğŸ“‹ Response:</strong> <pre>${JSON.stringify(
                responseData,
                null,
                2
              )}</pre>
            </div>
          `;
        } catch (error) {
          resultsDiv.innerHTML = `
            <div class="test-result error">
              <strong>ğŸ’¥ Error:</strong> ${error.message}
            </div>
          `;
        }
      }

      function openLoginPage() {
        window.open("http://localhost:5173/dang-nhap", "_blank");
      }

      function openAdminPage() {
        window.open("http://localhost:5173/admin", "_blank");
      }

      function testDirectAccess() {
        const resultsDiv = document.getElementById("test-results");
        resultsDiv.innerHTML =
          '<div class="test-result info">ğŸš€ Äang má»Ÿ trang trong tab má»›i...</div>';
        window.open("http://localhost:5173/admin/doanh-thu-gia-su", "_blank");
      }

      function testFilters() {
        const resultsDiv = document.getElementById("test-results");
        resultsDiv.innerHTML = `
                <div class="test-result info">
                    ğŸ“ <strong>Test Manual cho Bá»™ Lá»c:</strong><br>
                    1. Thá»­ thay Ä‘á»•i loáº¡i thá»i gian (NgÃ y/Tuáº§n/ThÃ¡ng/NÄƒm)<br>
                    2. Thá»­ thay Ä‘á»•i giÃ¡ trá»‹ thá»i gian (1, 2, 3...)<br>
                    3. Kiá»ƒm tra xem dá»¯ liá»‡u cÃ³ cáº­p nháº­t Ä‘Ãºng khÃ´ng<br>
                    4. Kiá»ƒm tra tá»•ng doanh thu cÃ³ thay Ä‘á»•i theo
                </div>
            `;
      }

      function testPagination() {
        const resultsDiv = document.getElementById("test-results");
        resultsDiv.innerHTML = `
                <div class="test-result info">
                    ğŸ“„ <strong>Test Manual cho PhÃ¢n Trang:</strong><br>
                    1. Thá»­ chuyá»ƒn trang báº±ng cÃ¡c nÃºt Previous/Next<br>
                    2. Thá»­ thay Ä‘á»•i sá»‘ item per page (10, 20, 50)<br>
                    3. Kiá»ƒm tra tá»•ng sá»‘ trang hiá»ƒn thá»‹ Ä‘Ãºng<br>
                    4. Kiá»ƒm tra dá»¯ liá»‡u load Ä‘Ãºng cho má»—i trang
                </div>
            `;
      }

      function testSorting() {
        const resultsDiv = document.getElementById("test-results");
        resultsDiv.innerHTML = `
                <div class="test-result info">
                    ğŸ”„ <strong>Test Manual cho Sáº¯p Xáº¿p:</strong><br>
                    1. Click vÃ o cÃ¡c header column Ä‘á»ƒ sort<br>
                    2. Kiá»ƒm tra sort ascending/descending<br>
                    3. Kiá»ƒm tra sort vá»›i cÃ¡c cá»™t khÃ¡c nhau<br>
                    4. Kiá»ƒm tra sort icon hiá»ƒn thá»‹ Ä‘Ãºng
                </div>
            `;
      }
    </script>
  </body>
</html>
