<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
      FINAL Test: StudentClassroomPage Meeting API - Gi·ªëng H·ªát Gia S∆∞
    </title>
    <style>
      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        max-width: 1400px;
        margin: 0 auto;
        padding: 20px;
        line-height: 1.6;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: #333;
      }
      .container {
        background: white;
        padding: 30px;
        border-radius: 15px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      }
      h1 {
        color: #2c3e50;
        text-align: center;
        margin-bottom: 30px;
        font-size: 2.5em;
      }
      h2 {
        color: #34495e;
        border-left: 4px solid #3498db;
        padding-left: 15px;
        margin-top: 30px;
      }
      h3 {
        color: #2980b9;
        margin-top: 25px;
      }
      .api-comparison {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
        margin: 20px 0;
      }
      .tutor-side,
      .student-side {
        padding: 20px;
        border-radius: 10px;
        border: 2px solid;
      }
      .tutor-side {
        background: #e8f5e8;
        border-color: #28a745;
      }
      .student-side {
        background: #e3f2fd;
        border-color: #2196f3;
      }
      .success {
        background: #d4edda;
        padding: 15px;
        border-radius: 8px;
        margin: 15px 0;
        border-left: 4px solid #28a745;
      }
      .warning {
        background: #fff3cd;
        padding: 15px;
        border-radius: 8px;
        margin: 15px 0;
        border-left: 4px solid #ffc107;
      }
      .error {
        background: #f8d7da;
        padding: 15px;
        border-radius: 8px;
        margin: 15px 0;
        border-left: 4px solid #dc3545;
      }
      .code-block {
        background: #2d3748;
        color: #e2e8f0;
        padding: 15px;
        border-radius: 8px;
        font-family: "Courier New", monospace;
        overflow-x: auto;
        margin: 10px 0;
      }
      .step {
        margin: 15px 0;
        padding: 15px;
        background: #ffffff;
        border: 1px solid #dee2e6;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }
      .step-number {
        background: #007bff;
        color: white;
        width: 30px;
        height: 30px;
        border-radius: 50%;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        margin-right: 15px;
        font-weight: bold;
        font-size: 1.2em;
      }
      .feature-list {
        list-style: none;
        padding: 0;
      }
      .feature-list li {
        padding: 10px 0;
        border-bottom: 1px solid #eee;
      }
      .feature-list li:before {
        content: "‚úì";
        color: #28a745;
        font-weight: bold;
        margin-right: 15px;
        font-size: 1.2em;
      }
      .comparison-table {
        width: 100%;
        border-collapse: collapse;
        margin: 20px 0;
      }
      .comparison-table th,
      .comparison-table td {
        border: 1px solid #ddd;
        padding: 12px;
        text-align: left;
      }
      .comparison-table th {
        background-color: #f8f9fa;
        font-weight: bold;
      }
      .highlight {
        background: linear-gradient(120deg, #84fab0 0%, #8fd3f4 100%);
        padding: 3px 8px;
        border-radius: 4px;
        font-weight: bold;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>
        üéØ FINAL TEST: StudentClassroomPage Meeting API - Gi·ªëng H·ªát Gia S∆∞
      </h1>

      <div class="success">
        <h3>‚úÖ C√ÅC THAY ƒê·ªîI CH·ª¶ CH·ªêT ƒê√É HO√ÄN TH√ÄNH</h3>
        <ul class="feature-list">
          <li>S·ª≠ d·ª•ng <strong>Api()</strong> function thay v√¨ Api.callApi()</li>
          <li>Method: <strong>POST</strong> thay v√¨ GET (gi·ªëng gia s∆∞)</li>
          <li>
            Data structure: <strong>response.data.result.items</strong> v·ªõi
            fallback paths
          </li>
          <li>Authentication: <strong>requireToken: true</strong></li>
          <li>Debugging logs: <strong>STUDENT DEBUG</strong> prefix</li>
        </ul>
      </div>

      <div class="api-comparison">
        <div class="tutor-side">
          <h3>üéì Gia S∆∞ (TutorClassroomPage)</h3>
          <div class="code-block">
            const response = await Api({ endpoint: "meeting/get-meeting",
            method: METHOD_TYPE.POST, data: { classroomId: classroomId, },
            requireToken: true, }); // Data extraction with fallbacks if
            (response.data?.result?.items) { allMeetingsData =
            response.data.result.items; } else if (response.result?.items) {
            allMeetingsData = response.result.items; } else if
            (response.data?.items) { allMeetingsData = response.data.items; }
          </div>
        </div>

        <div class="student-side">
          <h3>üéí H·ªçc Sinh (StudentClassroomPage) - ƒê√É C·∫¨P NH·∫¨T</h3>
          <div class="code-block">
            const response = await Api({ endpoint: "meeting/get-meeting",
            method: METHOD_TYPE.POST, data: { classroomId: classroomId, },
            requireToken: true, }); // Data extraction with fallbacks (GI·ªêNG
            H·ªÜT) if (response.data?.result?.items) { allMeetingsData =
            response.data.result.items; } else if (response.result?.items) {
            allMeetingsData = response.result.items; } else if
            (response.data?.items) { allMeetingsData = response.data.items; }
          </div>
        </div>
      </div>

      <div class="success">
        <h2>üìä So S√°nh API Call - Tr∆∞·ªõc vs Sau</h2>
        <table class="comparison-table">
          <thead>
            <tr>
              <th>Thu·ªôc t√≠nh</th>
              <th>Tr∆∞·ªõc (Sai)</th>
              <th>Sau (ƒê√∫ng - Gi·ªëng Gia S∆∞)</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>Function</strong></td>
              <td><span style="color: red">Api.callApi()</span></td>
              <td><span style="color: green">Api({})</span></td>
            </tr>
            <tr>
              <td><strong>Method</strong></td>
              <td><span style="color: red">METHOD_TYPE.GET</span></td>
              <td><span style="color: green">METHOD_TYPE.POST</span></td>
            </tr>
            <tr>
              <td><strong>Data Passing</strong></td>
              <td><span style="color: red">Param th·ª© 3</span></td>
              <td><span style="color: green">data: {classroomId}</span></td>
            </tr>
            <tr>
              <td><strong>Authentication</strong></td>
              <td><span style="color: red">Kh√¥ng c√≥</span></td>
              <td><span style="color: green">requireToken: true</span></td>
            </tr>
            <tr>
              <td><strong>Data Extraction</strong></td>
              <td>
                <span style="color: red">Ch·ªâ response.data.result.items</span>
              </td>
              <td>
                <span style="color: green">Fallback paths nh∆∞ gia s∆∞</span>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="step">
        <h2>üß™ C√°c Test Cases Quan Tr·ªçng</h2>

        <div class="step">
          <span class="step-number">1</span>
          <strong>Test API Call v·ªõi Network Tab:</strong>
          <ul>
            <li>M·ªü Dev Tools ‚Üí Network tab</li>
            <li>Click "Xem danh s√°ch ph√≤ng h·ªçc"</li>
            <li>
              Ki·ªÉm tra request:
              <span class="highlight">POST /meeting/get-meeting</span>
            </li>
            <li>Request Body ph·∫£i c√≥: <code>{"classroomId": "..."}</code></li>
            <li>Headers ph·∫£i c√≥: <code>Authorization: Bearer ...</code></li>
          </ul>
        </div>

        <div class="step">
          <span class="step-number">2</span>
          <strong>Test Console Logs:</strong>
          <div class="code-block">
            Logs c·∫ßn th·∫•y: üîç Fetching meetings for classroom {id} using
            meeting/get-meeting endpoint üì• Meeting API response: {response
            object} üì• Full response structure: {JSON stringified} ‚úÖ STUDENT
            DEBUG - Found meetings in response.data.result.items: {count} üîç
            STUDENT DEBUG - Meeting data structure: {first meeting object} üîç
            STUDENT DEBUG - Setting meetings to state: {count}
          </div>
        </div>

        <div class="step">
          <span class="step-number">3</span>
          <strong>Test Response Data Structure:</strong>
          <ul>
            <li>
              Console logs ph·∫£i hi·ªÉn th·ªã response.data.result.items c√≥ data
            </li>
            <li>Fallback paths ƒë∆∞·ª£c test n·∫øu primary path kh√¥ng c√≥ data</li>
            <li>
              Meeting objects ph·∫£i c√≥ ƒë·∫ßy ƒë·ªß fields: meetingId, joinUrl, status,
              etc.
            </li>
          </ul>
        </div>

        <div class="step">
          <span class="step-number">4</span>
          <strong>Test Client-Side Operations:</strong>
          <ul>
            <li>Pagination kh√¥ng g·ªçi l·∫°i API (ki·ªÉm tra Network tab)</li>
            <li>Tab filtering kh√¥ng g·ªçi l·∫°i API</li>
            <li>URL state restore ho·∫°t ƒë·ªông v·ªõi POST API</li>
          </ul>
        </div>
      </div>

      <div class="warning">
        <h2>‚ö†Ô∏è Potential Issues & Solutions</h2>

        <h3>1. N·∫øu API tr·∫£ v·ªÅ 401/403:</h3>
        <ul>
          <li>Ki·ªÉm tra token trong localStorage/sessionStorage</li>
          <li>ƒê·∫£m b·∫£o requireToken: true ƒë∆∞·ª£c set</li>
          <li>Ki·ªÉm tra header Authorization trong Network tab</li>
        </ul>

        <h3>2. N·∫øu kh√¥ng c√≥ data trong response.data.result.items:</h3>
        <ul>
          <li>Ki·ªÉm tra console logs cho fallback paths</li>
          <li>So s√°nh response structure v·ªõi gia s∆∞</li>
          <li>Verify classroomId ƒë∆∞·ª£c truy·ªÅn ƒë√∫ng</li>
        </ul>

        <h3>3. N·∫øu Api() function kh√¥ng t·ªìn t·∫°i:</h3>
        <ul>
          <li>
            Ki·ªÉm tra import: <code>import Api from "../../network/Api";</code>
          </li>
          <li>ƒê·∫£m b·∫£o Api.js export default Api function</li>
        </ul>
      </div>

      <div class="success">
        <h2>üéØ Expected Results - Success Criteria</h2>

        <div class="step">
          <h3>Network Request:</h3>
          <ul>
            <li>‚úÖ Method: POST</li>
            <li>‚úÖ URL: /meeting/get-meeting</li>
            <li>‚úÖ Request Body: {"classroomId": "actual-id"}</li>
            <li>‚úÖ Headers: Authorization Bearer token</li>
            <li>‚úÖ Status: 200 OK</li>
          </ul>
        </div>

        <div class="step">
          <h3>Response Handling:</h3>
          <ul>
            <li>‚úÖ Data extracted from response.data.result.items</li>
            <li>‚úÖ Fallback paths working if needed</li>
            <li>‚úÖ allMeetings state populated correctly</li>
            <li>‚úÖ Client-side pagination working</li>
            <li>‚úÖ No additional API calls for pagination/filtering</li>
          </ul>
        </div>

        <div class="step">
          <h3>UI/UX:</h3>
          <ul>
            <li>‚úÖ Meetings display correctly with all info</li>
            <li>‚úÖ Pagination buttons work smoothly</li>
            <li>‚úÖ Tab filtering works instantly</li>
            <li>‚úÖ URL state management works</li>
            <li>‚úÖ No console errors</li>
          </ul>
        </div>
      </div>

      <div class="error">
        <h2>üö® Debug Checklist n·∫øu v·∫´n kh√¥ng ho·∫°t ƒë·ªông</h2>
        <ol>
          <li>
            <strong>Ki·ªÉm tra import Api:</strong> ƒê·∫£m b·∫£o import ƒë√∫ng t·ª´
            network/Api
          </li>
          <li>
            <strong>Ki·ªÉm tra METHOD_TYPE:</strong> Ph·∫£i l√† POST, kh√¥ng ph·∫£i GET
          </li>
          <li>
            <strong>Ki·ªÉm tra requireToken:</strong> Ph·∫£i c√≥ requireToken: true
          </li>
          <li>
            <strong>Ki·ªÉm tra data structure:</strong> data: {classroomId: id}
          </li>
          <li>
            <strong>So s√°nh v·ªõi TutorClassroomPage:</strong> Copy exact same API
            call format
          </li>
          <li>
            <strong>Test v·ªõi Postman:</strong> Verify API endpoint ho·∫°t ƒë·ªông v·ªõi
            POST method
          </li>
          <li>
            <strong>Ki·ªÉm tra token:</strong> ƒêƒÉng nh·∫≠p l·∫°i n·∫øu token expired
          </li>
          <li>
            <strong>Check console:</strong> C√≥ error n√†o v·ªÅ CORS, authentication
            kh√¥ng
          </li>
        </ol>
      </div>

      <div
        class="highlight"
        style="
          text-align: center;
          padding: 20px;
          margin: 30px 0;
          font-size: 1.3em;
        "
      >
        üéâ B√ÇY GI·ªú H·ªåC SINH V√Ä GIA S∆Ø S·ª¨ D·ª§NG CH√çNH X√ÅC C√ôNG M·ªòT API CALL! üéâ
      </div>
    </div>
  </body>
</html>
